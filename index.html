<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Personal Daily Planner - Organize your routine, tasks, and notes">
    <meta name="theme-color" content="#2563eb">
    <title>Daily Planner</title>
    
    <!-- PWA Meta Tags -->
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Daily Planner">
    
    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="32x32" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ“…</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ“…</text></svg>">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React and React DOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Lucide React Icons -->
    <script src="https://unpkg.com/lucide-react@0.263.1/dist/cjs/lucide-react.js"></script>
    
    <style>
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        button {
            min-height: 44px;
            min-width: 44px;
        }
        input, textarea, select {
            font-size: 16px !important;
        }
        
        /* Loading screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #f9fafb;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
        
        .spinner {
            animate: spin 1s linear infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading" class="loading-screen">
        <div class="text-center">
            <div class="spinner w-8 h-8 border-4 border-blue-200 border-t-blue-600 rounded-full mx-auto mb-4"></div>
            <p class="text-gray-600">Loading Daily Planner...</p>
        </div>
    </div>
    
    <!-- App Container -->
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { Plus, Check, X, Edit2, Calendar, Clock, BookOpen, Target } = lucide;
        
        const DailyPlanner = () => {
            const [activeTab, setActiveTab] = useState('today');
            const [currentDate, setCurrentDate] = useState(new Date());
            
            // State for routine
            const [routine, setRoutine] = useState(() => {
                const saved = localStorage.getItem('dailyPlanner_routine');
                return saved ? JSON.parse(saved) : [
                    { id: 1, time: '06:00', activity: 'Wake up & Morning routine', completed: false },
                    { id: 2, time: '07:00', activity: 'Exercise/Workout', completed: false },
                    { id: 3, time: '08:00', activity: 'Breakfast', completed: false },
                    { id: 4, time: '09:00', activity: 'Work/Study (Focus Block 1)', completed: false },
                    { id: 5, time: '12:00', activity: 'Lunch Break', completed: false },
                    { id: 6, time: '13:00', activity: 'Work/Study (Focus Block 2)', completed: false },
                    { id: 7, time: '17:00', activity: 'Personal time/Hobbies', completed: false },
                    { id: 8, time: '19:00', activity: 'Dinner', completed: false },
                    { id: 9, time: '20:00', activity: 'Review day & Plan tomorrow', completed: false },
                    { id: 10, time: '22:00', activity: 'Wind down & Sleep prep', completed: false }
                ];
            });

            // State for tasks
            const [tasks, setTasks] = useState(() => {
                const saved = localStorage.getItem('dailyPlanner_tasks');
                return saved ? JSON.parse(saved) : [
                    { id: 1, text: 'Complete project proposal', priority: 'high', completed: false, createdDate: new Date().toDateString() },
                    { id: 2, text: 'Call dentist for appointment', priority: 'medium', completed: false, createdDate: new Date().toDateString() },
                    { id: 3, text: 'Buy groceries', priority: 'low', completed: false, createdDate: new Date().toDateString() }
                ];
            });

            // State for events
            const [events, setEvents] = useState(() => {
                const saved = localStorage.getItem('dailyPlanner_events');
                return saved ? JSON.parse(saved) : [
                    { id: 1, title: 'Team Meeting', time: '10:00', date: new Date().toDateString(), description: 'Weekly team sync' },
                    { id: 2, title: 'Doctor Appointment', time: '15:30', date: new Date().toDateString(), description: 'Annual checkup' }
                ];
            });

            // State for notes
            const [notes, setNotes] = useState(() => {
                const saved = localStorage.getItem('dailyPlanner_notes');
                return saved ? JSON.parse(saved) : [
                    { id: 1, text: 'Remember to backup computer files', timestamp: new Date().toLocaleString() },
                    { id: 2, text: 'Book idea: productivity app for creative people', timestamp: new Date().toLocaleString() }
                ];
            });

            // New item inputs
            const [newTask, setNewTask] = useState('');
            const [newTaskPriority, setNewTaskPriority] = useState('medium');
            const [newNote, setNewNote] = useState('');
            const [newEvent, setNewEvent] = useState({ title: '', time: '', description: '' });
            const [newRoutine, setNewRoutine] = useState({ time: '', activity: '' });

            // Edit states
            const [editingRoutine, setEditingRoutine] = useState(null);
            const [editRoutineData, setEditRoutineData] = useState({ time: '', activity: '' });

            // Save to localStorage whenever state changes
            useEffect(() => {
                localStorage.setItem('dailyPlanner_routine', JSON.stringify(routine));
            }, [routine]);

            useEffect(() => {
                localStorage.setItem('dailyPlanner_tasks', JSON.stringify(tasks));
            }, [tasks]);

            useEffect(() => {
                localStorage.setItem('dailyPlanner_events', JSON.stringify(events));
            }, [events]);

            useEffect(() => {
                localStorage.setItem('dailyPlanner_notes', JSON.stringify(notes));
            }, [notes]);

            // Hide loading screen
            useEffect(() => {
                const loading = document.getElementById('loading');
                if (loading) {
                    setTimeout(() => {
                        loading.style.opacity = '0';
                        setTimeout(() => loading.remove(), 300);
                    }, 1000);
                }
            }, []);

            // Reset routine completion daily
            useEffect(() => {
                const today = new Date().toDateString();
                const lastReset = localStorage.getItem('dailyPlanner_lastReset');
                
                if (lastReset !== today) {
                    setRoutine(prev => prev.map(item => ({ ...item, completed: false })));
                    localStorage.setItem('dailyPlanner_lastReset', today);
                }
            }, []);

            // Get today's date formatted
            const formatDate = (date) => {
                return date.toLocaleDateString('en-US', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                });
            };

            // Progress calculation
            const getProgress = () => {
                const completedRoutine = routine.filter(item => item.completed).length;
                const completedTasks = tasks.filter(task => task.completed && task.createdDate === currentDate.toDateString()).length;
                const todayTasks = tasks.filter(task => task.createdDate === currentDate.toDateString()).length;
                
                const totalItems = routine.length + todayTasks;
                const completedItems = completedRoutine + completedTasks;
                
                return totalItems > 0 ? Math.round((completedItems / totalItems) * 100) : 0;
            };

            // Add new task
            const addTask = () => {
                if (newTask.trim()) {
                    setTasks([...tasks, {
                        id: Date.now(),
                        text: newTask.trim(),
                        priority: newTaskPriority,
                        completed: false,
                        createdDate: currentDate.toDateString()
                    }]);
                    setNewTask('');
                    
                    // Show success feedback
                    if (navigator.vibrate) navigator.vibrate(50);
                }
            };

            // Add new note
            const addNote = () => {
                if (newNote.trim()) {
                    setNotes([...notes, {
                        id: Date.now(),
                        text: newNote.trim(),
                        timestamp: new Date().toLocaleString()
                    }]);
                    setNewNote('');
                    
                    if (navigator.vibrate) navigator.vibrate(50);
                }
            };

            // Add new event
            const addEvent = () => {
                if (newEvent.title.trim() && newEvent.time) {
                    setEvents([...events, {
                        id: Date.now(),
                        title: newEvent.title.trim(),
                        time: newEvent.time,
                        date: currentDate.toDateString(),
                        description: newEvent.description.trim()
                    }]);
                    setNewEvent({ title: '', time: '', description: '' });
                    
                    if (navigator.vibrate) navigator.vibrate(50);
                }
            };

            // Add new routine item
            const addRoutineItem = () => {
                if (newRoutine.time && newRoutine.activity.trim()) {
                    setRoutine([...routine, {
                        id: Date.now(),
                        time: newRoutine.time,
                        activity: newRoutine.activity.trim(),
                        completed: false
                    }].sort((a, b) => a.time.localeCompare(b.time)));
                    setNewRoutine({ time: '', activity: '' });
                    
                    if (navigator.vibrate) navigator.vibrate(50);
                }
            };

            // Toggle completion
            const toggleRoutineComplete = (id) => {
                setRoutine(routine.map(item => 
                    item.id === id ? { ...item, completed: !item.completed } : item
                ));
                
                if (navigator.vibrate) navigator.vibrate(25);
            };

            const toggleTaskComplete = (id) => {
                setTasks(tasks.map(task => 
                    task.id === id ? { ...task, completed: !task.completed } : task
                ));
                
                if (navigator.vibrate) navigator.vibrate(25);
            };

            // Delete items
            const deleteTask = (id) => {
                setTasks(tasks.filter(task => task.id !== id));
                if (navigator.vibrate) navigator.vibrate([25, 50]);
            };

            const deleteNote = (id) => {
                setNotes(notes.filter(note => note.id !== id));
                if (navigator.vibrate) navigator.vibrate([25, 50]);
            };

            const deleteEvent = (id) => {
                setEvents(events.filter(event => event.id !== id));
                if (navigator.vibrate) navigator.vibrate([25, 50]);
            };

            const deleteRoutineItem = (id) => {
                setRoutine(routine.filter(item => item.id !== id));
                if (navigator.vibrate) navigator.vibrate([25, 50]);
            };

            // Edit routine
            const startEditRoutine = (item) => {
                setEditingRoutine(item.id);
                setEditRoutineData({ time: item.time, activity: item.activity });
            };

            const saveRoutineEdit = () => {
                setRoutine(routine.map(item => 
                    item.id === editingRoutine 
                        ? { ...item, time: editRoutineData.time, activity: editRoutineData.activity }
                        : item
                ).sort((a, b) => a.time.localeCompare(b.time)));
                setEditingRoutine(null);
            };

            // Get today's events and tasks
            const todayEvents = events.filter(event => event.date === currentDate.toDateString());
            const todayTasks = tasks.filter(task => task.createdDate === currentDate.toDateString());

            const getPriorityColor = (priority) => {
                switch(priority) {
                    case 'high': return 'border-l-red-500 bg-red-50';
                    case 'medium': return 'border-l-yellow-500 bg-yellow-50';
                    case 'low': return 'border-l-green-500 bg-green-50';
                    default: return 'border-l-gray-500 bg-gray-50';
                }
            };

            return (
                <div className="min-h-screen bg-gray-50">
                    {/* Header */}
                    <div className="bg-white shadow-sm border-b sticky top-0 z-10">
                        <div className="max-w-6xl mx-auto px-4 py-3 sm:py-4">
                            <div className="flex items-center justify-between">
                                <div className="min-w-0 flex-1">
                                    <h1 className="text-lg sm:text-2xl font-semibold text-gray-900 truncate">Daily Planner</h1>
                                    <p className="text-sm sm:text-base text-gray-600 truncate">{formatDate(currentDate)}</p>
                                </div>
                                <div className="text-right ml-4 flex-shrink-0">
                                    <div className="text-xs sm:text-sm text-gray-600">Progress</div>
                                    <div className="flex items-center gap-2">
                                        <div className="text-lg sm:text-2xl font-bold text-blue-600">{getProgress()}%</div>
                                        <div className="w-8 sm:w-12 h-2 bg-gray-200 rounded-full">
                                            <div 
                                                className="h-full bg-blue-600 rounded-full transition-all duration-300"
                                                style={{ width: `${getProgress()}%` }}
                                            ></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Navigation - Mobile Scrollable */}
                    <div className="bg-white border-b sticky top-16 sm:top-20 z-10">
                        <div className="max-w-6xl mx-auto px-2 sm:px-4">
                            <nav className="flex space-x-2 sm:space-x-8 overflow-x-auto scrollbar-hide">
                                {[
                                    { id: 'today', label: 'Today', icon: Calendar },
                                    { id: 'routine', label: 'Routine', icon: Clock },
                                    { id: 'tasks', label: 'Tasks', icon: Target },
                                    { id: 'notes', label: 'Notes', icon: BookOpen }
                                ].map(({ id, label, icon: Icon }) => (
                                    <button
                                        key={id}
                                        onClick={() => setActiveTab(id)}
                                        className={`flex items-center gap-1 sm:gap-2 py-3 sm:py-4 px-3 sm:px-2 border-b-2 font-medium text-xs sm:text-sm transition-colors whitespace-nowrap ${
                                            activeTab === id
                                                ? 'border-blue-500 text-blue-600'
                                                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'
                                        }`}
                                    >
                                        <Icon className="w-4 h-4 flex-shrink-0" />
                                        <span className="hidden sm:inline">{label}</span>
                                    </button>
                                ))}
                            </nav>
                        </div>
                    </div>

                    {/* Main Content */}
                    <div className="max-w-6xl mx-auto px-3 sm:px-4 py-4 sm:py-6 pb-20 sm:pb-6">
                        
                        {/* Today Tab */}
                        {activeTab === 'today' && (
                            <div className="grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6">
                                {/* Routine Progress */}
                                <div className="lg:col-span-1">
                                    <div className="bg-white rounded-lg shadow-sm p-4 sm:p-6">
                                        <h3 className="text-base sm:text-lg font-semibold mb-4">Today's Routine</h3>
                                        <div className="space-y-2 sm:space-y-3 max-h-80 sm:max-h-96 overflow-y-auto">
                                            {routine.map(item => (
                                                <div key={item.id} className="flex items-center gap-2 sm:gap-3 p-2 sm:p-3 bg-gray-50 rounded-lg">
                                                    <button
                                                        onClick={() => toggleRoutineComplete(item.id)}
                                                        className={`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${
                                                            item.completed 
                                                                ? 'bg-green-500 border-green-500 text-white' 
                                                                : 'border-gray-300 hover:border-green-400'
                                                        }`}
                                                    >
                                                        {item.completed && <Check className="w-3 h-3" />}
                                                    </button>
                                                    <div className="flex-1 min-w-0">
                                                        <div className="text-xs sm:text-sm font-medium text-gray-600">{item.time}</div>
                                                        <div className={`text-sm ${item.completed ? 'line-through text-gray-500' : 'text-gray-900'}`}>
                                                            {item.activity}
                                                        </div>
                                                    </div>
                                                )}
                                                
                                                {editingRoutine !== item.id && (
                                                    <div className="flex gap-1">
                                                        <button
                                                            onClick={() => startEditRoutine(item)}
                                                            className="p-2 text-gray-400 hover:text-blue-600"
                                                        >
                                                            <Edit2 className="w-4 h-4" />
                                                        </button>
                                                        <button
                                                            onClick={() => deleteRoutineItem(item.id)}
                                                            className="p-2 text-gray-400 hover:text-red-600"
                                                        >
                                                            <X className="w-4 h-4" />
                                                        </button>
                                                    </div>
                                                )}
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Tasks Tab */}
                        {activeTab === 'tasks' && (
                            <div className="max-w-2xl mx-auto space-y-4 sm:space-y-6">
                                {/* Add new task */}
                                <div className="bg-white rounded-lg shadow-sm p-4 sm:p-6">
                                    <h3 className="font-medium mb-3">Add New Task</h3>
                                    <div className="space-y-3">
                                        <input
                                            type="text"
                                            placeholder="What needs to be done?"
                                            value={newTask}
                                            onChange={(e) => setNewTask(e.target.value)}
                                            onKeyPress={(e) => e.key === 'Enter' && addTask()}
                                            className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                        />
                                        <div className="flex gap-3">
                                            <select
                                                value={newTaskPriority}
                                                onChange={(e) => setNewTaskPriority(e.target.value)}
                                                className="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                            >
                                                <option value="low">Low Priority</option>
                                                <option value="medium">Medium Priority</option>
                                                <option value="high">High Priority</option>
                                            </select>
                                            <button
                                                onClick={addTask}
                                                className="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center gap-2"
                                            >
                                                <Plus className="w-4 h-4" />
                                                Add
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                {/* Add new event */}
                                <div className="bg-white rounded-lg shadow-sm p-4 sm:p-6">
                                    <h3 className="font-medium mb-3">Schedule Event</h3>
                                    <div className="space-y-3">
                                        <input
                                            type="text"
                                            placeholder="Event title"
                                            value={newEvent.title}
                                            onChange={(e) => setNewEvent({...newEvent, title: e.target.value})}
                                            className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                        />
                                        <div className="grid grid-cols-1 sm:grid-cols-2 gap-3">
                                            <input
                                                type="time"
                                                value={newEvent.time}
                                                onChange={(e) => setNewEvent({...newEvent, time: e.target.value})}
                                                className="px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                            />
                                            <input
                                                type="text"
                                                placeholder="Description (optional)"
                                                value={newEvent.description}
                                                onChange={(e) => setNewEvent({...newEvent, description: e.target.value})}
                                                className="px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                            />
                                        </div>
                                        <button
                                            onClick={addEvent}
                                            className="w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center justify-center gap-2"
                                        >
                                            <Calendar className="w-4 h-4" />
                                            Schedule Event
                                        </button>
                                    </div>
                                </div>

                                {/* All tasks */}
                                <div className="bg-white rounded-lg shadow-sm p-4 sm:p-6">
                                    <h2 className="text-lg sm:text-xl font-semibold mb-4">All Tasks</h2>
                                    {tasks.length === 0 ? (
                                        <p className="text-gray-500 text-sm text-center py-8">No tasks yet. Add your first task above!</p>
                                    ) : (
                                        <div className="space-y-3">
                                            {tasks.map(task => (
                                                <div key={task.id} className={`flex items-center gap-3 p-3 border-l-4 rounded-lg ${getPriorityColor(task.priority)}`}>
                                                    <button
                                                        onClick={() => toggleTaskComplete(task.id)}
                                                        className={`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${
                                                            task.completed 
                                                                ? 'bg-green-500 border-green-500 text-white' 
                                                                : 'border-gray-300 hover:border-green-400'
                                                        }`}
                                                    >
                                                        {task.completed && <Check className="w-3 h-3" />}
                                                    </button>
                                                    <div className="flex-1 min-w-0">
                                                        <div className={`text-sm ${task.completed ? 'line-through text-gray-500' : 'text-gray-900'}`}>
                                                            {task.text}
                                                        </div>
                                                        <div className="text-xs text-gray-500">
                                                            <span className="capitalize">{task.priority} priority</span>
                                                            <span className="mx-1">â€¢</span>
                                                            <span>{task.createdDate}</span>
                                                        </div>
                                                    </div>
                                                    <button
                                                        onClick={() => deleteTask(task.id)}
                                                        className="p-2 text-gray-400 hover:text-red-600"
                                                    >
                                                        <X className="w-4 h-4" />
                                                    </button>
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>

                                {/* All events */}
                                <div className="bg-white rounded-lg shadow-sm p-4 sm:p-6">
                                    <h2 className="text-lg sm:text-xl font-semibold mb-4">Scheduled Events</h2>
                                    {events.length === 0 ? (
                                        <p className="text-gray-500 text-sm text-center py-8">No events scheduled. Add your first event above!</p>
                                    ) : (
                                        <div className="space-y-3">
                                            {events.map(event => (
                                                <div key={event.id} className="flex items-center gap-3 p-3 bg-blue-50 border-l-4 border-l-blue-500 rounded-lg">
                                                    <Calendar className="w-4 h-4 text-blue-600 flex-shrink-0" />
                                                    <div className="flex-1 min-w-0">
                                                        <div className="font-medium text-gray-900 text-sm">{event.title}</div>
                                                        <div className="text-xs text-gray-600">
                                                            {event.date} at {event.time}
                                                            {event.description && <span> â€¢ {event.description}</span>}
                                                        </div>
                                                    </div>
                                                    <button
                                                        onClick={() => deleteEvent(event.id)}
                                                        className="p-2 text-gray-400 hover:text-red-600"
                                                    >
                                                        <X className="w-4 h-4" />
                                                    </button>
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>
                            </div>
                        )}

                        {/* Notes Tab */}
                        {activeTab === 'notes' && (
                            <div className="max-w-2xl mx-auto">
                                <div className="bg-white rounded-lg shadow-sm p-4 sm:p-6">
                                    <h2 className="text-lg sm:text-xl font-semibold mb-6">Quick Notes</h2>
                                    
                                    {/* Add new note */}
                                    <div className="mb-6">
                                        <textarea
                                            placeholder="Jot down a quick note..."
                                            value={newNote}
                                            onChange={(e) => setNewNote(e.target.value)}
                                            rows={4}
                                            className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"
                                        />
                                        <button
                                            onClick={addNote}
                                            className="mt-3 w-full sm:w-auto px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center justify-center gap-2"
                                        >
                                            <Plus className="w-4 h-4" />
                                            Add Note
                                        </button>
                                    </div>

                                    {/* Notes list */}
                                    {notes.length === 0 ? (
                                        <p className="text-gray-500 text-sm text-center py-8">No notes yet. Add your first note above!</p>
                                    ) : (
                                        <div className="space-y-4">
                                            {notes.map(note => (
                                                <div key={note.id} className="p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                                                    <div className="flex justify-between items-start gap-3">
                                                        <div className="flex-1 min-w-0">
                                                            <p className="text-gray-900 whitespace-pre-wrap text-sm">{note.text}</p>
                                                            <p className="text-xs text-gray-500 mt-2">{note.timestamp}</p>
                                                        </div>
                                                        <button
                                                            onClick={() => deleteNote(note.id)}
                                                            className="p-2 text-gray-400 hover:text-red-600 flex-shrink-0"
                                                        >
                                                            <X className="w-4 h-4" />
                                                        </button>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // Render the app
        ReactDOM.render(<DailyPlanner />, document.getElementById('root'));

        // Register service worker for PWA functionality
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js')
                    .then(function(registration) {
                        console.log('SW registered: ', registration);
                    }, function(registrationError) {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>

    <!-- Babel for JSX transformation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</body>
</html>`text-xs sm:text-sm ${item.completed ? 'line-through text-gray-500' : 'text-gray-900'}`}>
                                                            {item.activity}
                                                        </div>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>

                                {/* Tasks and Events */}
                                <div className="lg:col-span-2 space-y-4 sm:space-y-6">
                                    {/* Quick Add */}
                                    <div className="bg-white rounded-lg shadow-sm p-4 sm:p-6">
                                        <h3 className="text-base sm:text-lg font-semibold mb-4">Quick Add</h3>
                                        <div className="space-y-3">
                                            <div className="flex gap-2">
                                                <input
                                                    type="text"
                                                    placeholder="Add a task..."
                                                    value={newTask}
                                                    onChange={(e) => setNewTask(e.target.value)}
                                                    onKeyPress={(e) => e.key === 'Enter' && addTask()}
                                                    className="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"
                                                />
                                                <select
                                                    value={newTaskPriority}
                                                    onChange={(e) => setNewTaskPriority(e.target.value)}
                                                    className="px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"
                                                >
                                                    <option value="low">Low</option>
                                                    <option value="medium">Medium</option>
                                                    <option value="high">High</option>
                                                </select>
                                                <button
                                                    onClick={addTask}
                                                    className="px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center justify-center"
                                                >
                                                    <Plus className="w-4 h-4" />
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    {/* Events */}
                                    <div className="bg-white rounded-lg shadow-sm p-4 sm:p-6">
                                        <h3 className="text-base sm:text-lg font-semibold mb-4">Today's Events</h3>
                                        {todayEvents.length === 0 ? (
                                            <p className="text-gray-500 text-sm">No events scheduled for today</p>
                                        ) : (
                                            <div className="space-y-3">
                                                {todayEvents.map(event => (
                                                    <div key={event.id} className="flex items-center gap-3 p-3 bg-blue-50 border-l-4 border-l-blue-500 rounded-lg">
                                                        <Clock className="w-4 h-4 text-blue-600 flex-shrink-0" />
                                                        <div className="flex-1 min-w-0">
                                                            <div className="font-medium text-gray-900">{event.title}</div>
                                                            <div className="text-sm text-gray-600">{event.time} â€¢ {event.description}</div>
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        )}
                                    </div>

                                    {/* Tasks */}
                                    <div className="bg-white rounded-lg shadow-sm p-4 sm:p-6">
                                        <h3 className="text-base sm:text-lg font-semibold mb-4">Today's Tasks</h3>
                                        {todayTasks.length === 0 ? (
                                            <p className="text-gray-500 text-sm">No tasks for today</p>
                                        ) : (
                                            <div className="space-y-3">
                                                {todayTasks.map(task => (
                                                    <div key={task.id} className={`flex items-center gap-3 p-3 border-l-4 rounded-lg ${getPriorityColor(task.priority)}`}>
                                                        <button
                                                            onClick={() => toggleTaskComplete(task.id)}
                                                            className={`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${
                                                                task.completed 
                                                                    ? 'bg-green-500 border-green-500 text-white' 
                                                                    : 'border-gray-300 hover:border-green-400'
                                                            }`}
                                                        >
                                                            {task.completed && <Check className="w-3 h-3" />}
                                                        </button>
                                                        <div className="flex-1 min-w-0">
                                                            <div className={`${task.completed ? 'line-through text-gray-500' : 'text-gray-900'} text-sm`}>
                                                                {task.text}
                                                            </div>
                                                            <div className="text-xs text-gray-500 capitalize">{task.priority} priority</div>
                                                        </div>
                                                        <button
                                                            onClick={() => deleteTask(task.id)}
                                                            className="p-1 text-gray-400 hover:text-red-600"
                                                        >
                                                            <X className="w-4 h-4" />
                                                        </button>
                                                    </div>
                                                ))}
                                            </div>
                                        )}
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Other tabs with mobile optimizations... */}
                        {/* For brevity, I'll include the key mobile-optimized sections */}

                        {/* Routine Tab */}
                        {activeTab === 'routine' && (
                            <div className="max-w-2xl mx-auto">
                                <div className="bg-white rounded-lg shadow-sm p-4 sm:p-6">
                                    <h2 className="text-lg sm:text-xl font-semibold mb-6">Daily Routine</h2>
                                    
                                    {/* Add new routine item */}
                                    <div className="mb-6 p-4 bg-gray-50 rounded-lg">
                                        <h3 className="font-medium mb-3">Add Routine Item</h3>
                                        <div className="space-y-3">
                                            <input
                                                type="time"
                                                value={newRoutine.time}
                                                onChange={(e) => setNewRoutine({...newRoutine, time: e.target.value})}
                                                className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                            />
                                            <input
                                                type="text"
                                                placeholder="Activity description"
                                                value={newRoutine.activity}
                                                onChange={(e) => setNewRoutine({...newRoutine, activity: e.target.value})}
                                                className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                            />
                                            <button
                                                onClick={addRoutineItem}
                                                className="w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center justify-center gap-2"
                                            >
                                                <Plus className="w-4 h-4" />
                                                Add to Routine
                                            </button>
                                        </div>
                                    </div>

                                    {/* Routine items */}
                                    <div className="space-y-3">
                                        {routine.map(item => (
                                            <div key={item.id} className="flex items-center gap-3 p-3 sm:p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                                                <button
                                                    onClick={() => toggleRoutineComplete(item.id)}
                                                    className={`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${
                                                        item.completed 
                                                            ? 'bg-green-500 border-green-500 text-white' 
                                                            : 'border-gray-300 hover:border-green-400'
                                                    }`}
                                                >
                                                    {item.completed && <Check className="w-3 h-3" />}
                                                </button>
                                                
                                                {editingRoutine === item.id ? (
                                                    <div className="flex-1 space-y-2">
                                                        <input
                                                            type="time"
                                                            value={editRoutineData.time}
                                                            onChange={(e) => setEditRoutineData({...editRoutineData, time: e.target.value})}
                                                            className="w-full px-2 py-1 border border-gray-300 rounded text-sm"
                                                        />
                                                        <input
                                                            type="text"
                                                            value={editRoutineData.activity}
                                                            onChange={(e) => setEditRoutineData({...editRoutineData, activity: e.target.value})}
                                                            className="w-full px-2 py-1 border border-gray-300 rounded text-sm"
                                                        />
                                                        <div className="flex gap-2">
                                                            <button
                                                                onClick={saveRoutineEdit}
                                                                className="flex-1 px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700"
                                                            >
                                                                Save
                                                            </button>
                                                            <button
                                                                onClick={() => setEditingRoutine(null)}
                                                                className="flex-1 px-3 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700"
                                                            >
                                                                Cancel
                                                            </button>
                                                        </div>
                                                    </div>
                                                ) : (
                                                    <div className="flex-1 min-w-0">
                                                        <div className="text-xs sm:text-sm font-medium text-gray-600">{item.time}</div>
                                                        <div className={